export function escapeStadiumParens(code){const src=code;const out=[];for(let i=0;i<src.length;){const idx=src.indexOf('([',i);if(idx===-1){out.push(src.slice(i));break;}out.push(src.slice(i,idx));let j=idx+2,closed=-1;while(j<src.length-1){if(src[j]===']'&&src[j+1]===')'){closed=j;break;}j++;}if(closed===-1){out.push(src.slice(idx));break;}const inner=src.slice(idx+2,closed);const esc=inner.replace(/\(/g,'&#40;').replace(/\)/g,'&#41;');out.push('(['+esc+'])');i=closed+2;}return out.join('');}